{% extends "base.html" %}

{% block title %}
{% if employee %}
Käyttäjätiedot
{% else %}
Omat asiakastiedot
{% endif %}
{% endblock %}
{% block content %}
{% if employee %}
<h1>Käyttäjätiedot</h1>
{% else %}
<h1>Omat asiakastiedot</h1>
{% endif %}
<p>Käyttäjänimi: {{ username }}</p>
<h2>Osoitteet</h2>
{% if addresses %}
<table>
    <tr>
        <th>Nimi</th>
        <th>Katuosoite</th>
        <th>Postinumero ja -toimipaikka</th>
        <th>Puhelinnumero</th>
        <th>Sähköpostiosoite</th>
        {% if employee %}<th>Näkyvissä</th>{% endif %}
        <th></th>
    </tr>
    {% for address in addresses %}
    {% if address.visible or employee %}
    <tr>
        <td>{{ address.full_name }}</a></td>
        <td>{{ address.street_address }}</td>
        <td>{{ address.zip_code }} {{ address.city }}</td>
        <td>{{ address.phone_number }}</td>
        <td>{{ address.email }}</td>
        {% if employee %}<td>{% if address.visible %}&#x2714{% else %}&#x2715{% endif %}</td>{% endif %}
        {% if address.visible %}<td><button type="button" onclick="location.href = '/edit-address/{{ address.id }}'">Muokkaa</button></td>{% endif %}
    </tr>
    {% endif %}
    {% endfor %}
</table>
<p><a href="/new-address/{{ id }}">Lisää uusi osoite</a></p>
{% elif not addresses %}
{% if employee %}
<p>Käyttäjä ei ole lisännyt yhtään osoitetta.</p>
<p><a href="/new-address/{{ id }}">Lisää uusi osoite</a></p>
{% elif not employee %}
<p>Sinulla ei ole osoitteita. Lisää uusi osoite <a href="/new-address/{{ id }}">tästä</a>.</p>
{% endif %}
{% endif %}

{% if employee %}
<p><a href="/../make-admin/{{ id }}" onclick="return confirm('Haluatko varmasti lisätä käyttäjälle ylläpitäjän oikeudet?')">Lisää työntekijän oikeudet</a></p>
{% endif %}

{% with messages = get_flashed_messages() %}
{% if messages %}
{% for message in messages %}
<p>{{ message }}</p>
{% endfor %}
{% endif %}
{% endwith %}

{% endblock %}